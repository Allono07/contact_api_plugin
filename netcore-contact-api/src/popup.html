<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Netcore Contact API</title>
    <link rel="stylesheet" href="styles/popup.css">
    <style>
        html, body {
            width: 700px;
            height: auto;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body style="margin: 0; padding: 0; width: 700px; height: auto;">
    <div class="container">
        <header class="header">
            <div class="header-title">
                <h1>Netcore Contact API</h1>
            </div>
            <div class="header-tabs">
                <button class="tab-btn active" data-tab="form">Form</button>
                <button class="tab-btn" data-tab="history">History</button>
            </div>
        </header>

        <!-- Form Tab -->
        <div class="tab-content active" id="form-tab">
            <div class="form-container">
                <!-- Region Selection -->
                <div class="form-group">
                    <label for="region">Region *</label>
                    <select id="region">
                        <option value="">Select Region</option>
                        <option value="us">US (api.netcoresmartech.com)</option>
                        <option value="in">India (apiin.netcoresmartech.com)</option>
                        <option value="eu">EU (jsonapi.eu-north-1.eu.netcoresmartech.com)</option>
                    </select>
                </div>

                <!-- API Key -->
                <div class="form-group">
                    <label for="apiKey">API Key *</label>
                    <input type="password" id="apiKey" placeholder="Enter your API key">
                    <button id="toggleApiKey" class="toggle-btn">Show</button>
                </div>

                <!-- Activity Selection -->
                <div class="form-group">
                    <label for="activity">Activity *</label>
                    <select id="activity">
                        <option value="">Select Activity</option>
                        <option value="add">Add</option>
                        <option value="update">Update</option>
                        <option value="delete">Delete</option>
                        <option value="addsync">Add Sync (Synchronous API)</option>
                    </select>
                </div>

                <!-- List ID -->
                <div class="form-group">
                    <label for="listId">List ID (Optional)</label>
                    <input type="number" id="listId" placeholder="Leave empty if not needed">
                </div>

                <!-- Dynamic Attributes Section -->
                <div class="form-group">
                    <label>Contact Attributes</label>
                    <div id="attributesContainer" class="attributes-container">
                        <!-- Attributes will be added here dynamically -->
                    </div>
                    <button id="addAttributeBtn" class="btn btn-secondary">+ Add Attribute</button>
                </div>

                <!-- Actions -->
                <div class="actions">
                    <button id="generateCurlBtn" class="btn btn-primary">Generate cURL</button>
                    <button id="triggerApiBtn" class="btn btn-success">Trigger API</button>
                </div>
            </div>
        </div>

        <!-- History Tab -->
        <div class="tab-content" id="history-tab">
            <div class="history-header-section">
                <h2>Call History</h2>
                <button id="clearHistoryBtn" class="btn btn-small btn-danger">Clear All</button>
            </div>
            <div id="historyContainer" class="history-container">
                <!-- History items will be loaded here -->
            </div>
        </div>

        <!-- cURL Display Section -->
        <div id="curlSection" class="curl-section hidden">
            <div class="curl-header">
                <h3>Generated cURL Command</h3>
                <button id="copyCurlBtn" class="btn btn-small">Copy</button>
            </div>
            <textarea id="curlOutput" readonly class="curl-output"></textarea>
        </div>

        <!-- Response Section -->
        <div id="responseSection" class="response-section hidden">
            <div class="response-header">
                <h3>API Response</h3>
                <button id="closeResponseBtn" class="btn btn-small">Ã—</button>
            </div>
            <div id="responseContent" class="response-content"></div>
            <button id="copyResponseBtn" class="btn btn-small">Copy Response</button>
        </div>

        <!-- Status Messages -->
        <div id="statusMessage" class="status-message"></div>
    </div>

    <script src="js/modules/constants.js"></script>
    <script src="js/modules/utils.js"></script>
    <script src="js/modules/api-handler.js"></script>
    <script src="js/modules/ui-manager.js"></script>
    <script src="js/popup.js"></script>
</body>
</html>
